{% extends "core.twig" %}
{% block title %}{{ _('Package') }} {{ p.name }}{% endblock %}
{% block contentHeader %}
        {{ _('Package') }}
        <small>{{ p.name }}</small>
{% endblock %}
{% block scripts %}
<script>
repo.api.dispatch.on('ready', function() {
d3.select('section.content').call(bs.union()
	.item(bs.form().url("{{ path_for('packages.edit.desc', {'str': p.dbp_str_id}) }}").body(bs.box()
		.title("{{ _('Description') }}")
		.tool(bs.button.form().text("{{ _('Submit') }}").icon("fa fa-pencil").class('btn-info'))
		.body(bs.textarea('desc').value({{ json(p.infos) }}))
	)).item(bs.form().url("{{ path_for('packages.edit.urls', {'str': p.dbp_str_id}) }}").body(bs.box().title("{{ _('URLs') }}").tool(bs.button.form().text("{{ _('Submit') }}").icon("fa fa-pencil").class('btn-info')).body(bs.union()
		.item(bs.formGroup('forum').label("{{ _('Forum') }}").type("text").value("{{ p.forumurl }}"))
		.item(bs.formGroup('up').label("{{ _('Up-stream website') }}").type("text").value("{{ p.upurl }}"))
		.item(bs.formGroup('upsrc').label("{{ _('Up-stream sources') }}").type("text").value("{{ p.upsrcurl }}"))
		.item(bs.formGroup('src').label("{{ _('Pyra sources') }}").type("text").value("{{ p.srcurl }}"))
		.item(bs.formGroup('license').label("{{ _('License') }}").type("text").value("{{ p.licenseurl }}"))
	))).item(bs.form().url("{{ path_for('packages.edit.license', {'str': p.dbp_str_id}) }}").body(bs.box().title("{{ _('License') }}")
		.tool(bs.button.form().text("{{ _('Submit') }}").icon("fa fa-pencil").class('btn-info')).body(bs.union()
		.item(bs.formGroup('ltype').label("{{ _('Type') }}").obj(bs.select('ltype').value({{ p.lic_id }})
 		.add("{{ _('Unset') }}",0)
{% for l in lics %}
		.add("{{ l.name }}",{{ l.id }})
{% endfor %}
		)).item(bs.formGroup('name').label("{{ _('License name') }}").type("text").value("{{ p.lic_detail }}"))
	)))
);
});
</script>
{% endblock %}
